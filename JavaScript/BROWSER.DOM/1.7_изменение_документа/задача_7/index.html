<!DOCTYPE HTML>
<html>

  <head>
    <style>
      table {
        border-collapse: collapse;
      }
  
      td,
      th {
        border: 1px solid black;
        padding: 3px;
        text-align: center;
      }
  
      th {
        font-weight: bold;
        background-color: #E6E6E6;
      }
    </style>
  </head>

<body>

  <div id="calendar">
    
  </div>


  <script>
    //       Напишите функцию createCalendar(elem, year, month).
      // Вызов функции должен создать календарь для заданного месяца month в году year и вставить его в elem.
      // Календарь должен быть таблицей, где неделя – это <tr>, а день – это <td>. 
      //   У таблицы должен быть заголовок с названиями дней недели, каждый день – <th>, первым днём недели должен быть понедельник.
      // Например, createCalendar(cal, 2012, 9) сгенерирует в cal следующий календарь(картинка в учебнике)

    function createCalendar(elem, year, month) {
      let calendar = document.getElementById('calendar');
      let table = document.createElement('table');

      let daysOfWeek = ['пн','вт','ср','чт','пт','сб','вс'];

      //запись с сентябрем просто для закрепления
      // let date = new Date(2012, 09)//тут октябрь
      // date.setDate(0);//тут последний день сентября
      // let daysCount = date.getDate();//итого дней в сентябре

      //универсальный вариант не только для сентября
      let date = new Date(year, month)//месяц, следующий за нужным
      date.setDate(0);//последний день нужного месяца
      let daysCount = date.getDate();//итого дней в нужном месяце
      console.log(daysCount)

      let weeksCount = Math.ceil(daysCount/7);//кол-во строк без названий дней недели

      //создание строки с днями недели
      let firstRow = document.createElement('tr');
      table.append(firstRow);

      for (item of daysOfWeek) {
        let th = document.createElement('th');
        th.textContent = item;
        firstRow.append(th);
      }
      
      //ВНЕ ЦИКЛОВ я хочу день отсчета получить и счетчик 1-30

      let thisDay = new Date(date.setDate(1));// 1 первое блядское сентября получили(i ноль а нам нужно с первого дня поэтому i+1)
      let thisDayOfWeek = thisDay.getDay();//получили 6 суббота

      let counter = 1;

      //ИЗ-ЗА ФЕВРАЛЯ В КОТОРОМ 28 ДНЕЙ  и это 4 недели ровно
      if (daysCount/7 === 4 && thisDayOfWeek != 1) {
        weeksCount = 5;
      }

      // создание строк в таблице
      for (let i = 0; i < weeksCount; i += 1) {
        let tr = document.createElement('tr');
        
        //создание td внутри строки
        for (let i = 0; i < 7; i += 1) {
          let td = document.createElement('td');
          td.className = i+1;//опознавательный знак для определения дня недели if
          // 1 2 3 4 5 6 7 
          
          //заполнение ячейки дня недели 
          if (td.className == thisDayOfWeek) {//если ячейка 6 и день недели 6 то заполняем
            td.textContent = counter;//день от 1 до 30
            counter += 1;//увеличиваем для следующей итерации28
            thisDayOfWeek += 1;//тоже для след итерации8
          } 
          tr.append(td);

          //если числа месяца кончились то ячейка остается пустой
          if (counter > daysCount) {
            td.textContent = '';
          }
        }
        
        table.append(tr);
        //после заполнения строки меняем день недели на понедельник для новой строки
        thisDayOfWeek = 1;
      }
      calendar.append(table);
    }

    createCalendar(calendar, 2022, 02);
  </script>

</body>
</html>